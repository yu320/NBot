services:
  nbot:
    image: ghcr.io/yu320/nbot-discord:latest
    container_name: nbot
    restart: unless-stopped
    environment:
      # 2. 讓 Compose 從環境變數讀取金鑰
      # 這些變數名稱 (TOKEN, CHAN_ID) 必須與您的 CI/CD 檔案中的 'env:' 區塊完全對應
      - TZ=Asia/Taipei

      - DISCORD_TOKEN=${TOKEN}
      - CHANNEL_ID=${CHAN_ID}
      - UPTIME_KUMA_URL=${KUMA_URL}
      - CALENDAR_API_URL=${CAL_API_URL}
      - MUSIC_CHANNEL_ID=${MUSIC_CHAN_ID}
    volumes:
      - ./data:/app
networks: {}
